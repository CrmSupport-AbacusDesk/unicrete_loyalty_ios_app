
<ion-header>
    <ion-navbar>
        <ion-title>{{'Registration' | translate}}</ion-title>
    </ion-navbar>
</ion-header>

<ion-content class="main-backgroung">
    <form #f="ngForm" (ngSubmit)="f.form.valid ? submit() : scrollUp()">
        <!-- <div class="ragistration-fields pt10">
            <div class="heading line" style="margin: 0px 0px 10px -15px;">
                <p>Choose Type</p>
            </div>
            
            <div class="radio-section">
                <ion-list radio-group name="user_type" [(ngModel)]="data.user_type" #user_type="ngModel" required>
                    <ion-item>
                        <ion-radio value="1"></ion-radio>
                        <ion-label>{{'Karigar'|translate}}</ion-label>
                    </ion-item>
                    
                    <ion-item>
                        <ion-label>{{'Customer'|translate}}</ion-label>
                        <ion-radio value="3"></ion-radio>
                    </ion-item>
                </ion-list>
            </div>
        </div> -->
        <div class="heading line">
            <p>{{'Basic Information' | translate}}</p>
        </div>
        <!-- <div class="ragistration-fields">
            <div class="left-right">
                <div class="left-part">
                    <p class="cls-circle" (click)="openeditprofile()">
                        <i class="material-icons" *ngIf ="data.profile == ''">camera_alt</i>
                        <img [src]="data.profile" *ngIf ="data.profile">
                    </p>
                </div>
                <div class="right-part cs-form">
                    <ion-list>
                        <ion-item class="cs-input"  [ngClass]="{'error':f.submitted && first_name?.invalid}">
                            <ion-label floating>{{'First Name' | translate}}*</ion-label>
                            <ion-input type="text" name="first_name" #first_name="ngModel" [(ngModel)]="data.first_name" (ngModelChange)="(data.first_name!=null)?data.first_name[0] = data.first_name[0].toUpperCase():''" (keypress)="namecheck($event)" required></ion-input>
                        </ion-item>
                        <ion-item class="cs-input" [ngClass]="{'error':f.submitted && last_name?.invalid}">
                            <ion-label floating>{{'Last Name' | translate}}*</ion-label>
                            <ion-input type="text"  name="last_name" #last_name="ngModel" [(ngModel)]="data.last_name" (ngModelChange)="(data.last_name!=null)?data.last_name[0] = data.last_name[0].toUpperCase():''" (keypress)="namecheck($event)" required [ngClass]="{'error':f.submitted && last_name?.invalid}"  maxlength="10" ></ion-input>
                        </ion-item>
                    </ion-list>
                </div>
            </div>
            
            
            <div class="cs-form">
                <ion-list>
                    <ion-item class="cs-input" [ngClass]="{'error':f.submitted && mobile_no?.invalid}"  >
                        <ion-label floating>{{'Mobile No' | translate}}.*</ion-label>
                        <ion-input type="text" name="mobile_no" #mobile_no="ngModel" [(ngModel)]="data.mobile_no" required  (keypress)="MobileNumber($event)" readonly ></ion-input>
                    </ion-item>
                    
                    
                    <ion-item class="cs-date" [ngClass]="{'error':f.submitted && dob?.invalid}">
                        <ion-label>{{'Date of Birth' | translate}}*</ion-label>
                        <ion-datetime displayFormat="DD/MM/YYYY" max={{today_date}} type="text"  name="dob" #dob="ngModel" [(ngModel)]="data.dob" required >
                        </ion-datetime>
                    </ion-item>
                </ion-list>
            </div>
        </div> -->
        
        <div class="ragistration-fields">
            <div class="left-right">
                <div class="left-part align-in-center wp100">
                    <p class="cls-circle" (click)="openeditprofile()">
                        <i class="material-icons" *ngIf="data.profile == ''">camera_alt</i>
                        <img [src]="data.profile" *ngIf="data.profile" required>
                    </p>
                </div>
            </div>
            
            <div class=" cs-form mt10">
                <ion-list>
                    <ion-item class="cs-input" [ngClass]="{'error':f.submitted && first_name?.invalid}">
                        <ion-label floating>{{'First Name' | translate}}*</ion-label>
                        <ion-input type="text" name="first_name" #first_name="ngModel" [(ngModel)]="data.first_name" (ngModelChange)="(data.first_name!=null)?data.first_name[0] = data.first_name[0].toUpperCase():''" (keypress)="namecheck($event)" required></ion-input>
                    </ion-item>
                    <ion-item class="cs-input" [ngClass]="{'error':f.submitted && last_name?.invalid}">
                        <ion-label floating>{{'Last Name' | translate}}</ion-label>
                        <ion-input type="text" name="last_name" #last_name="ngModel" [(ngModel)]="data.last_name" (ngModelChange)="(data.last_name!=null)?data.last_name[0] = data.last_name[0].toUpperCase():''" (keypress)="namecheck($event)"></ion-input>
                    </ion-item>
                    
                    <ion-item class="cs-input" [ngClass]="{'error':f.submitted && mobile_no?.invalid}">
                        <ion-label floating>{{'Mobile No' | translate}}.*</ion-label>
                        <ion-input type="number" name="mobile_no" #mobile_no="ngModel" [(ngModel)]="data.mobile_no" required readonly></ion-input>
                    </ion-item>
                    
                    <ion-item class="cs-input" [ngClass]="{'error':f.submitted && whatsapp_mobile_no
                    ?.invalid}">
                    <ion-label floating>{{'Whatsapp No' | translate}}.</ion-label>
                    <ion-input type="tel" name="whatsapp_mobile_no
                    " #whatsapp_mobile_no="ngModel" [(ngModel)]="data.whatsapp_mobile_no
                    " maxlength="10" minlength="10" min="0"></ion-input>
                </ion-item>
                
                <ion-item class="cs-input" [ngClass]="{'error':(f.submitted && email?.invalid) || (f.submitted && !email.valid)}">
                    <ion-label floating>{{'Email ID' | translate}}</ion-label>
                    <ion-input type="email" name="email" #email="ngModel" [(ngModel)]="data.email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"></ion-input>
                </ion-item>
                
                <ion-item class="cs-date mb0" [ngClass]="{'error':f.submitted && dob?.invalid}">
                    <ion-label>{{'Date of Birth' | translate}}*</ion-label>
                    <ion-datetime displayFormat="DD/MM/YYYY" max={{today_date}} type="text" name="dob" #dob="ngModel" [(ngModel)]="data.dob" required>
                    </ion-datetime>
                </ion-item>
            </ion-list>
        </div>
    </div>
    
    <div class="heading line">
        <p>{{'Address Information' | translate}}</p>
    </div>
    
    <div class="ragistration-fields">
        <div class="cs-form">
            <ion-list>
                <ion-item class="cs-input" [ngClass]="{'error':(f.address && address?.invalid) || (f.submitted && !address.valid)}">
                    <ion-label floating>{{'Address' | translate}}</ion-label>
                    
                    <ion-input type="text"  name="address" #address="ngModel" [(ngModel)]="data.address" (ngModelChange)="caps_add(data.address)"></ion-input>
                </ion-item>
                
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && pincode?.invalid}">
                    <ion-label floating>{{'Pincode' | translate}}*</ion-label>
                    <ion-input type="tel" name="pincode" [(ngModel)]="data.pincode" #pincode="ngModel" required maxlength="6" minlength="6" (input)="getaddress(data.pincode)"></ion-input>
                </ion-item>
                
                
                <ion-item class="cs-select" [ngClass]="{'error':f.submitted && state?.invalid}">
                    <ion-label>{{'State' | translate}}*</ion-label>
                    <ion-select name="state" [(ngModel)]="data.state" #state="ngModel" (ngModelChange)="getDistrictList(data.state)" required>
                        <ion-option *ngFor="let row of state_list" value="{{row.state_name}}">{{row.state_name}}</ion-option>
                    </ion-select>
                </ion-item>
                
                <ion-item class="cs-select" [ngClass]="{'error':f.submitted && state?.invalid}">
                    <ion-label >{{'District' | translate}}*</ion-label>
                    <ion-select name="district" [(ngModel)]="data.district" #district="ngModel" (ngModelChange)="getCityList(data.district)" required>
                        <ion-option *ngFor="let row of district_list" value="{{row.district_name}}">{{row.district_name}}</ion-option>
                    </ion-select>
                </ion-item>
                
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && city?.invalid}">
                    <ion-label floating >{{'City' | translate}}*</ion-label>
                    <ion-input type="text"   name="city" [(ngModel)]="data.city" #city="ngModel" required ></ion-input>
                </ion-item>
                
            </ion-list>
        </div>
    </div>
    
    
    <div class="heading line">
        <p>{{'Document Information' | translate}}</p>
    </div>
    
    <div class="ragistration-fields">
        <div class="cs-form">
            <ion-list>
                <ion-item class="cs-select" [ngClass]="{'error':f.submitted && document_type?.invalid}">
                    <ion-label>{{'Select Document' | translate}}</ion-label>
                    <ion-select name="document_type" [(ngModel)]="data.document_type" #document_type="ngModel" required>
                        <ion-option value="Aadhaar Card">{{'Aadhaar card' | translate}}</ion-option>
                        <ion-option value="Voter Card">{{'Voter Card' | translate}}</ion-option>
                    </ion-select>
                </ion-item>
                
                
                <div class="upload-document" (click)="onUploadChange()">
                    <p *ngIf="data.document_image==''">
                        <i class="material-icons">add_circle</i>
                        <br>
                        {{ data.document_type=='Aadhaar Card' ? ('Upload Front Side' | translate ) : ('Upload Document' | translate)}}
                    </p>
                    <img *ngIf="data.document_image != ''"[src]="data.document_image" alt="">
                </div>
                
                <div class="upload-document" *ngIf="data.document_type=='Aadhaar Card'" (click)="backDocPhoto()">
                    <p *ngIf="data.document_image_back==''"><i class="material-icons">add_circle</i><br>{{'Upload Back Side' | translate}}</p>
                    <img *ngIf="data.document_image_back != ''"[src]="data.document_image_back" alt="">
                </div>
                
                
                
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && document_no?.invalid}" *ngIf="data.document_type=='Aadhaar Card'" >
                    <ion-label floating>{{'Aadhaar Card Number' | translate}}*</ion-label>
                    <ion-input type="tel" name="document_no" #document_no="ngModel" [(ngModel)]="data.document_no" maxlength="12" minlength="12"  required></ion-input>
                </ion-item>		
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && document_no?.invalid}" *ngIf="data.document_type=='Voter Card'">
                    <ion-label floating>{{'Voter Card Number' | translate}}*</ion-label>
                    <ion-input type="text" name="document_no" #document_no="ngModel" [(ngModel)]="data.document_no" required></ion-input>
                </ion-item>				
            </ion-list>
        </div>
    </div>


    <div class="heading line">
        <p>{{'Pan Card Information' | translate}}</p>
    </div>
    
    <div class="ragistration-fields">
        <div class="cs-form">
            <ion-list>
                <div class="upload-document" (click)="onUploadPancard()">
                    <p *ngIf="data.pan_img==''">
                        <i class="material-icons">add_circle</i>
                        <br>
                        {{'Upload Pan Card Image' | translate}}
                    </p>
                    <img *ngIf="data.pan_img != ''"[src]="data.pan_img" alt="">
                </div>
                
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && pan_no?.invalid}">
                    <ion-label floating>{{'Pan Card Number' | translate}}*</ion-label>
                    <ion-input type="text" name="pan_no" #pan_no="ngModel" [(ngModel)]="data.pan_no" pattern="[A-z]{5}[0-9]{4}[A-z]{1}"></ion-input>
                </ion-item>	
                <div *ngIf="pan_no.errors?.pattern" class="invalid-feedback">
                    <div>{{'Invaild Pan Card Number' | translate}}</div>
                </div>	
            </ion-list>
        </div>
    </div>
    
    
    
    <div class="heading line">
        <p>{{'Dealer Information' | translate}}</p>
    </div>
    
    <div class="ragistration-fields">
        <div class="cs-form">
            <ion-list>
                <ion-item class="cs-input">
                    <ion-label floating>{{'Counter Name' | translate}}</ion-label>
                    <ion-input type="text"  name="dealer_counter_name " pattern="[a-zA-Z ]+" ng-pattern-restrict #dealer_counter_name ="ngModel" [(ngModel)]="data.dealer_counter_name " ></ion-input>
                </ion-item>
                
                <ion-item class="cs-input">
                    <ion-label floating>{{'Contact Person' | translate}}</ion-label>
                    <ion-input type="text" name="dealer_contact_person " #dealer_contact_person ="ngModel" [(ngModel)]="data.dealer_contact_person" ></ion-input>
                </ion-item>
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && dealer_mobile?.invalid}">
                    <ion-label floating>{{'Mobile No' | translate}}.</ion-label>
                    <ion-input type="tel"  name="dealer_mobile " #dealer_mobile ="ngModel" [(ngModel)]="data.dealer_mobile"  maxlength="10" minlength="10"></ion-input>
                </ion-item>	
                <!-- <ion-item class="cs-input">
                    <ion-label floating>{{'Address' | translate}}</ion-label>
                    <ion-input type="text" name="dealer_address " #dealer_address ="ngModel" [(ngModel)]="data.dealer_address" ></ion-input>
                </ion-item>				 -->
            </ion-list>
        </div>
    </div>
    
    
    <div class="heading line">
        <p>{{'Bank Information' | translate}}</p>
    </div>
    
    <div class="ragistration-fields">
        <div class="cs-form">
            <ion-list>
                <ion-item  class="cs-input"  [ngClass]="{'error':f.submitted && account_holder_name?.invalid}">
                    <ion-label floating>{{'Account Holder Name' | translate}}</ion-label>
                    <ion-input type="text"  name="account_holder_name"  ng-pattern-restrict #account_holder_name ="ngModel" [(ngModel)]="data.account_holder_name "></ion-input>
                </ion-item>
                
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && bank_name?.invalid}">
                    <ion-label floating>{{'Bank Name' | translate}}</ion-label>
                    <ion-input type="text"  name="bank_name " pattern="[\x00-\x7F]+" ng-pattern-restrict #bank_name ="ngModel" [(ngModel)]="data.bank_name "></ion-input>
                </ion-item> 
                
                
                <ion-item class="cs-input" >
                    <ion-label floating>{{'Account Number' | translate}}</ion-label>
                    <ion-input type="tel" name="account_number " #account_number ="ngModel" [(ngModel)]="data.account_number"  minlength="9" maxlength="18"></ion-input>
                </ion-item>
                
                <ion-item class="cs-input" [ngClass]="{'error':f.submitted && ifsc_code?.invalid}">
                    <ion-label floating>{{'IFSC Code' | translate}}</ion-label>
                    <ion-input type="text"  name="ifsc_code " #ifsc_code ="ngModel" [(ngModel)]="data.ifsc_code"  pattern="^[A-Z]{4}[0][A-Z0-9]{6}$"></ion-input>
                </ion-item>	
                <div class="eror" *ngIf="ifsc_code.errors?.pattern">
                    <p> {{ 'Invalid IFSC code' | translate}}</p>
                </div>


                <div class="upload-document" (click)="onUploadCheque()">
                    <p *ngIf="data.cheque_image==''">
                        <i class="material-icons">add_circle</i>
                        <br>
                        {{'Upload Cheque/ Passbook' | translate}}
                    </p>
                    <img *ngIf="data.cheque_image != ''"[src]="data.cheque_image" alt="">
                </div>
            </ion-list>
        </div>
    </div>
    
    
    
    <ng-container *ngIf="!data.id">
        <div class="heading line">
            <p>{{'Referral Code' | translate}}</p>
        </div>
        <div class="ragistration-fields">
            <div class="cs-form">
                <ion-list>
                    <ion-item class="cs-input">
                        <ion-label floating>{{'Referral Code' | translate}}</ion-label>
                        <ion-input type="text"  name="referral_code " #referral_code ="ngModel" [(ngModel)]="data.referral_code " ></ion-input>
                    </ion-item>
                </ion-list>
            </div>
        </div>
    </ng-container>
    <button ion-button class="cs-btn m0">{{ data.id ? ('Update' |  translate) : ('Continue' | translate)}}</button>
</form>
</ion-content>

